# 20230417 [FE]+[BE] 회의

### 카드 목록에서 데이터를 얼마나 유지할 것인가

영구저장 !!!! 페이지네이션을 잘하자

### 내 카드들 보는 목록에서 카드를 누르면 해당카드를 사용해서 만든 일기 목록을 보여줄것이다.

### 카드만들기 방식

<aside>
🎴

**주인공 :** ___________ [  ] 내가 지정한 주인공

**장소 :**     _________    [  ]  현재 위치

**추가설정  :** [  ] 자동생성키워드1   
                   [  ] 자동생성키워드2
                   [  ] 자동생성키워드3
                   [  ]  __________________  [등록]

</aside>

- 키워드 0개 안됨
- 디폴트 값으로 주인공과 장소는 체크가 된 상태
- GPS 도로명 주소

### 자동생성

카드 자동생성은 없다. 오직 일기 자동생성만 있을뿐

일기 자동생성 전 10분~20분 전 푸쉬알림이 뜬다. “ 오늘의 키워드 입력해줘 “ 키워드 받기

- 카드유무에 상관없이 언제나 알림이 뜬다.
- 일기 자동생성 시간은 디폴트값으로 22시이다. (수정가능)

카드와 일기는 수정과 삭제기능이 없다.

### GPS 사용은?

카드만들때 장소 : 현재위치

- 이거 통과될수 있는부분인가? 현재위치를 db에 저장해야하는데 적합? 이거 맞아?
- 1순위는 GPS로 현재위치  2순위로는 그게 안되면 랜덤장소 쏴준다.(그랜드캐냐,싸피화장실 ..)

### 일기를 보는 방식 4개

친구목록에서 보는 법

1. 친구 → 사람별
2. R 랜덤

---

별개로 보는 법

1. 내가 쓴 일기
2. 남이 쓴 일기 (1 + 2)

### 친구목록의 보는방식

- 맨처음에 R랜덤
- 사람아이콘은 우리로고디자인으로 일괄화

### 마이페이지 수정 항목

- 닉네임
- 일기 자동생성시간 (사용안함 체크시 → null)
- 기본 주인공 이름

### 랜덤일기교환의 방식

1. 소정메가 교환일기 발송 → 랜덤으로 문문이 수신 → 문문이 소정메에게 교환일기 발송 → 소정메가 수신

1. 소정메와 문문은 랜덤일기를 발송했다. → 발송한 사용자끼리의 랜덤매칭 → 소정메와 문문은 서로의 일기를 수신

1. 랜덤 교환 POOL에 소정메와 문문은 랜덤일기를 넣었다. → 소정메에게 그 중 하나를 , 문문에게 그 중 하나를 발송

POOL에 대한 심층 검사

- 같은 일기를 또 내게되면?
- 같은 일기를 3명의 사람이 가져가게 할것인지?
- 일기를 1명이 가져가면 바로 지울것인지?
- 여러일기를 넣을 수 있다.? (POOL의 내용을 풍부하게 하기위해서)
- 자신이 넣은거와 이미 한번뽑은 일기를 막아야한다.
- POOL 테이블 하나 + 체크하는 테이블 이 필요할 듯

그 밖의 체크

- 랜덤매칭된 유저를 친구추가할것인지? no
- 랜덤 매칭을 안달나게 하루에 하나만? 혹은 더미를 풍부하게 하기위해서 여러번 가능?
- UI는 어떻게 할건데?
- 만약 POOL로 했을때 내가 거기에 있는 일기를 다읽으면 어캐됨? 기다려!! , 더미를 많이 넣자
- 더미를 많이 만들어놓기위해 관리자가 하루에하나씩 랜덤일기를 만들어서 넣어놓는다.?

---

<aside>
🎴

# 정리하자면 4가지의 방식 중에 고민

### **POOL을 도서관 형태로 만드는건 어떨까**

→ 여러번 열람가능(3번까지) , 중복 X 

팔로잉팔로워처럼 하자

테이블을 두개만들어서 하나는 유저와 유저가 보낸책을 기록 

다른하나는 소설을 받는 유저의 아이디와 그유저가 받은 소설의 기록

똑같은걸 넣으면 실제로는 아무런 db에 영향이 없게 만들고 겉으로만

3명이상이 읽었으면 쿼리를 날릴때 조건을 거든 db에서 삭제하든 빼자.

만약 더 이상 받을 소설이 없으면 어떻게해? 하루한번 제한을 두면 관리자가 하루에 하나씩 넣어주면 된다.

### 1대1매칭 (두가지로 나뉜다.)

→ 한번 보면 사라짐, 같은거 또 못냄 , 중복 X 

더미가 적다면? 시연하기위한 더미를 더 넣는다.

기술적 설명에 과연 맞음? 컨셉 살리면 ㅇㅇ

1) 두명씩 status로 해서 두명이 되면 묶어주고 status 1로 바꿔서 하는 방법

2) 날짜별로 묶어서 홀수면 더미하나 넣어서 짝수 맞춰서 다음날 정해진 시간에 해주자

### DB 삭제 ….무한정 …. 이건쫌?

스택? 

유저들이 들어올때마다 신호를 계속 보낸다.

중계 테이블 → 매칭 → 지운다 (하루한번)

성능적으로 최적은 아니다. (delete 무한..)

### queue 방식

대기방식 queue? 스프링에서.. 어려울것같은데?

소캣통신이 필요한가??

</aside>